<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/marked-element/marked-element.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">

<dom-module id="my-event">

  <!-- Defines the element's style and local DOM -->
  <template>
    <style>
      :host {
        display: block;
        padding: 16px;
        max-width: 1024px;
        margin: 0 auto;
      }
    </style>
    <app-location route="{{route}}"></app-location>
    <app-route
        route="{{route}}"
        pattern="/event/:name"
        data="{{routeData}}"
        tail="{{subroute}}"></app-route>

    <iron-ajax url="/data/{{routeData.name}}.md" handle-as="text" last-response="{{body}}" auto></iron-ajax>
    <h1>{{routeData.name}}</h1>
    <marked-element markdown="[[body]]">
      <div class="markdown-html"></div>
    </marked-element>
  </template>

  <!-- Creates the element's prototype and registers it -->
  <script>
    Polymer({
      is: 'my-event',
      properties: {
        route: Object,
        body: {
          type: String,
        },
      }
    });
  </script>

</dom-module>
